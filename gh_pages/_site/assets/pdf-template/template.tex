% Event Video Playback Documentation Template
\documentclass[$if(fontsize)$$fontsize$,$endif$$if(lang)$$babel-lang$,$endif$$if(papersize)$$papersize$paper,$endif$$for(classoption)$$classoption$$sep$,$endfor$]{$documentclass$}

% Packages
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{microtype}
\usepackage[$for(geometry)$$geometry$$sep$,$endfor$]{geometry}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{grffile}
\usepackage{longtable,booktabs}
\usepackage{listings}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{xcolor}

% Define colors (matching website theme)
\definecolor{primaryred}{RGB}{211,47,47}
\definecolor{darkred}{RGB}{198,40,40}
\definecolor{darkgray}{RGB}{33,33,33}
\definecolor{lightgray}{RGB}{245,245,245}
\definecolor{codebg}{RGB}{248,248,248}

% Hyperref setup
\hypersetup{
  breaklinks=true,
  bookmarks=true,
  pdfauthor={$author-meta$},
  pdftitle={$title-meta$},
  colorlinks=true,
  linkcolor=$if(linkcolor)$$linkcolor$$else$primaryred$endif$,
  citecolor=$if(citecolor)$$citecolor$$else$blue$endif$,
  urlcolor=$if(urlcolor)$$urlcolor$$else$primaryred$endif$,
  pdfborder={0 0 0}
}

% Headers and Footers
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\small\textcolor{darkgray}{$title$}}
\fancyhead[R]{\small\textcolor{darkgray}{Beckhoff USA Community}}
\fancyfoot[C]{\small\textcolor{darkgray}{Page \thepage\ of \pageref{LastPage}}}
\renewcommand{\headrulewidth}{0.5pt}
\renewcommand{\footrulewidth}{0.5pt}
\renewcommand{\headrule}{\hbox to\headwidth{\color{primaryred}\leaders\hrule height \headrulewidth\hfill}}
\renewcommand{\footrule}{\hbox to\headwidth{\color{primaryred}\leaders\hrule height \footrulewidth\hfill}}

% Title formatting
\usepackage{titling}
\pretitle{\begin{center}\LARGE\bfseries\color{primaryred}}
\posttitle{\par\end{center}\vskip 0.5em}
\preauthor{\begin{center}\large\color{darkgray}}
\postauthor{\end{center}}
\predate{\begin{center}\large\color{darkgray}}
\postdate{\par\end{center}}

% Section formatting
\usepackage{titlesec}
\titleformat{\section}
  {\Large\bfseries\color{primaryred}}
  {\thesection}{1em}{}
\titleformat{\subsection}
  {\large\bfseries\color{darkgray}}
  {\thesubsection}{1em}{}
\titleformat{\subsubsection}
  {\normalsize\bfseries\color{darkgray}}
  {\thesubsubsection}{1em}{}

% Code listings
\lstset{
  backgroundcolor=\color{codebg},
  basicstyle=\small\ttfamily,
  breaklines=true,
  captionpos=b,
  commentstyle=\color{darkgray},
  frame=single,
  frameround=tttt,
  rulecolor=\color{primaryred},
  keywordstyle=\color{primaryred},
  numbers=left,
  numberstyle=\tiny\color{darkgray},
  stringstyle=\color{darkred},
  tabsize=2,
  xleftmargin=2em,
  framexleftmargin=1.5em
}

% Inline code
\usepackage{listings}
\lstdefinestyle{inlinecode}{
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{codebg},
  breaklines=false
}

% Table styling
\usepackage{array}
\usepackage{colortbl}
\arrayrulecolor{primaryred}
\renewcommand{\arraystretch}{1.2}

% Pandoc compatibility
$if(highlighting-macros)$
$highlighting-macros$
$endif$

% Document metadata
$if(title)$
\title{$title$}
$endif$
$if(author)$
\author{$for(author)$$author$$sep$ \and $endfor$}
$endif$
$if(date)$
\date{$date$}
$endif$

% Begin document
\begin{document}

% Title page
$if(title)$
\maketitle
$endif$

% Abstract
$if(abstract)$
\begin{abstract}
$abstract$
\end{abstract}
$endif$

% Table of contents
$if(toc)$
{
\hypersetup{linkcolor=black}
\setcounter{tocdepth}{$toc-depth$}
\tableofcontents
}
\newpage
$endif$

% Body
$body$

% Back matter
\vfill
\begin{center}
\color{darkgray}
\rule{0.5\textwidth}{0.4pt}\\[0.5em]
\small
Generated from Event Video Playback Documentation\\
\textcopyright\ Beckhoff USA Community\\
Licensed under MIT License\\
\url{https://github.com/Beckhoff-USA-Community/EventVideoPlayback}
\end{center}

\end{document}
